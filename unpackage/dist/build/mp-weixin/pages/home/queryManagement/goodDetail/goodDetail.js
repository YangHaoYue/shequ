(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/queryManagement/goodDetail/goodDetail"],{"164b":function(e,t,o){},"4de2":function(e,t,o){"use strict";o.r(t);var a=o("f258"),n=o("7775");for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);o("b562");var s,u=o("f0c5"),r=Object(u["a"])(n["default"],a["b"],a["c"],!1,null,"dfadc42e",null,!1,a["a"],s);t["default"]=r.exports},7775:function(e,t,o){"use strict";o.r(t);var a=o("9c10"),n=o.n(a);for(var i in a)"default"!==i&&function(e){o.d(t,e,(function(){return a[e]}))}(i);t["default"]=n.a},"9c10":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={onLoad:function(e){this.goodId=e.id;var t=new Date;this.toDay=this.http.dateFormat("YYYY-mm-dd",t),this.time=this.toDay},onShow:function(){this.getInfo()},data:function(){return{goodId:"",order_id:"",goodDetail:{img:"",name:"",code:"",storeName:"",order:0,number:1,is_own:"",store_mobile:"",store_wx:""},priceList:[{name:"共享价",price:""},{name:"同行价",price:""},{name:"销售价",price:""},{name:"专柜价",price:""},{name:"成本价",price:""}],currentIndex:0,tagList:[],infoList:[{name:"店铺货号",value:"BLEW210129001"},{name:"商品序列号",value:"未知"},{name:"规格型号",value:"未知"},{name:"商品颜色",value:"未知"},{name:"材料说明",value:"未知"},{name:"商品成色",value:"二手货品"}],attachmentList:[],imgList:[],scimgList:[],videoResource:"",desc:"",totalDesc:"",businesList:[{name:"商品来源",value:""},{name:"商品来源方",value:""},{name:"入库人",value:""},{name:"回收人",value:""},{name:"入库时间",value:""}],wareHouseList:[{name:"操作时间",value:""},{name:"入库日期",value:""},{name:"入库人",value:""},{name:"商品来源",value:""},{name:"商品来源方",value:""}],saleList:[{name:"操作时间",value:""},{name:"销售日期",value:""},{name:"销售员",value:""},{name:"销售客户",value:""}],setList:[{name:"操作时间",value:""},{name:"改库存时间",value:""},{name:"操作者",value:""},{name:"操作数量",value:""},{name:"操作类型",value:""},{name:"备注",value:""}],showPopup:!1,number:0,reason:"退还来源方",reasonId:0,showReason:!1,reasonList:[{text:"退还来源方",color:"black",fontSize:28,id:0},{text:"其他",color:"black",fontSize:28,id:1}],showDate:!1,toDay:"",time:"",memo:"",showModal:!1}},methods:{getInfo:function(){var e=this;this.http.get("/api/v1/Index/getGoodDetail",{good_id:this.goodId},!0).then((function(t){1e3==t.code&&(e.goodDetail.name=t.data.title,e.goodDetail.code=t.data.store_no,e.goodDetail.storeName=t.data.store_name,e.goodDetail.img=t.data.pic,e.goodDetail.number=t.data.num_now,e.goodDetail.order=t.data.num_book,e.goodDetail.is_own=t.data.is_own,e.goodDetail.store_mobile=t.data.store_mobile,e.goodDetail.store_wx=t.data.store_wx,e.desc=t.data.desc,e.totalDesc=t.data.desc,e.priceList[0].price=t.data.share_price,e.priceList[1].price=t.data.peer_price,e.priceList[2].price=t.data.sell_price,e.priceList[3].price=t.data.counter_price,e.priceList[4].price=t.data.cost_price,e.tagList=t.data.care,e.attachmentList=t.data.annex,e.infoList[0].value=t.data.store_no,e.infoList[1].value=t.data.good_serial_num,e.infoList[2].value=t.data.specs,e.infoList[3].value=t.data.color,e.infoList[4].value=t.data.material_info,e.infoList[5].value=t.data.type_condition,e.imgList=t.data.img.map((function(t){return e.http.resourceUrl()+t})),e.videoResource=t.data.pri_video&&"[]"!=t.data.pri_video?e.http.resourceUrl()+t.data.pri_video:"",t.data.pri_img_arr.is_show&&(e.scimgList=t.data.pri_img_arr.pri_img.map((function(t){return e.http.resourceUrl()+t}))),e.businesList[0].value=t.data.business.type_from,e.businesList[1].value=t.data.business.type_from_cus,e.businesList[2].value=t.data.business.sto_user,e.businesList[3].value=t.data.business.recovery_user,e.businesList[4].value=t.data.business.created_at,e.wareHouseList[0].value=t.data.sto_log.created_at,e.wareHouseList[1].value=t.data.sto_log.date_in,e.wareHouseList[2].value=t.data.sto_log.sto_user,e.wareHouseList[3].value=t.data.sto_log.type_from,e.wareHouseList[4].value=t.data.sto_log.type_from_cus,e.saleList[0].value=t.data.order.created_at,e.saleList[1].value=t.data.order.date_in,e.saleList[2].value=t.data.order.seller,e.saleList[3].value=t.data.order.customer,e.setList[0].value=t.data.sto_edit_log.created_at,e.setList[1].value=t.data.sto_edit_log.edit_at,e.setList[2].value=t.data.sto_edit_log.user,e.setList[3].value=t.data.sto_edit_log.str,e.setList[4].value=t.data.sto_edit_log.reason,e.setList[5].value=t.data.sto_edit_log.remark,e.order_id=t.data.order.order_id)}))},currentChange:function(e){this.currentIndex=e},order:function(){e.navigateTo({url:"/pages/home/queryManagement/goodDetail/order?good_id=".concat(this.goodId,"&goodDetail=").concat(encodeURIComponent(JSON.stringify(this.goodDetail)))})},showImg:function(t,o){e.previewImage({current:o,urls:0==t?this.imgList:this.scimgList})},getSaveImgRole:function(){var e=this;wx.getSetting({success:function(t){t.authSetting["scope.writePhotosAlbum"]?e.downLoadImg():wx.authorize({scope:"scope.writePhotosAlbum",success:function(){console.log("success"),e.downLoadImg()}})}})},downLoadImg:function(){var t=this,o=this.imgList.length;this.imgList.map((function(a,n){console.log(n),0===n&&1!=o&&t.$refs.uToast.show({title:"正在保存，请稍后！",type:"warning"}),e.downloadFile({url:a,success:function(a){console.log(a.tempFilePath),e.saveImageToPhotosAlbum({filePath:a.tempFilePath,success:function(e){n===o-1&&(t.$refs.uToast.show({title:"保存成功！请在相册中查看！",type:"success"}),t.copy(t.totalDesc))},fail:function(e){console.log(e)}})}})}))},downLoadscImg:function(){this.scimgList.map((function(t){e.downloadFile({url:t,success:function(t){console.log(t.tempFilePath),e.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(e){console.log(e)},fail:function(e){console.log(e)}})}})}))},uploadVideo:function(){e.showLoading();var t=e.downloadFile({url:this.videoResource,success:function(t){200===t.statusCode&&e.saveVideoToPhotosAlbum({filePath:t.tempFilePath,success:function(){e.hideLoading(),e.showToast({title:"保存成功",icon:"none"})},fail:function(){e.hideLoading(),e.showToast({title:"保存失败，请稍后重试",icon:"none"})}})}});t.onProgressUpdate((function(e){console.log("下载进度"+e.progress),console.log("已经下载的数据长度"+e.totalBytesWritten),console.log("预期需要下载的数据总长度"+e.totalBytesExpectedToWrite)}))},makePhonecall:function(){e.makePhoneCall({phoneNumber:this.goodDetail.store_mobile})},delet:function(){var t=this;this.http.modal("提示","您确定要删除商品吗，删除后不可恢复？",!0,(function(o){o&&t.http.post("/api/v1/Storage/goodDelete",{good_id:t.goodId}).then((function(o){1e3==o.code?(e.$emit("back"),t.$refs.uToast.show({title:o.msg,type:"success",back:!0})):t.$refs.uToast.show({title:o.msg,type:"error"})}))}),"#FE8702")},chooseReason:function(e){this.reason=this.reasonList[e].text,this.reasonId=this.reasonList[e].id},print:function(){var e=this;this.http.modal("提示","您要打印商品详情吗？",!0,(function(t){t&&e.http.get("/api/v1/Printer/goods",{type:0,goods_id:e.goodId}).then((function(t){1e3==t.code?e.$refs.uToast.show({title:t.msg,type:"success"}):e.$refs.uToast.show({title:t.msg,type:"error"})}))}),"#FE8702")},editStoNum:function(){var e=this;this.http.post("/api/v1/History/editStoNum",{good_id:this.goodId,num_now:this.number,reason:this.reasonId,edit_at:this.time,remark:this.memo}).then((function(t){1e3==t.code?(e.$refs.uToast.show({title:t.msg,type:"success"}),e.showPopup=!1,e.showReason=!1,e.number=0,e.getInfo()):e.$refs.uToast.show({title:t.msg,type:"error"})}))},copy:function(t){e.setClipboardData({data:t})},toDetail:function(){""!=this.order_id?e.navigateTo({url:"/pages/home/salesReport/orderDetail/orderDetail?id=".concat(this.order_id)}):this.$refs.uToast.show({title:"本商品暂无销售记录",type:"warning"})},showItem:function(e){this.chooseReason(e),this.showReason=!0},toList:function(){""!=this.order_id?e.navigateTo({url:"/pages/home/salesReport/salesReport?good_id=".concat(this.goodId)}):this.$refs.uToast.show({title:"本商品暂无销售记录",type:"warning"})},toHistory:function(){""!=this.setList[1].value?e.navigateTo({url:"/pages/home/history/history?good_id=".concat(this.goodId,"&currentIndex=2")}):this.$refs.uToast.show({title:"本商品暂无库存编辑记录",type:"warning"})}}};t.default=o}).call(this,o("543d")["default"])},b562:function(e,t,o){"use strict";var a=o("164b"),n=o.n(a);n.a},e62a:function(e,t,o){"use strict";(function(e){o("2cfb");a(o("66fd"));var t=a(o("4de2"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},f258:function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return a}));var a={uImage:function(){return o.e("uview-ui/components/u-image/u-image").then(o.bind(null,"0e5c"))},uGap:function(){return o.e("uview-ui/components/u-gap/u-gap").then(o.bind(null,"3be9"))},uTag:function(){return o.e("uview-ui/components/u-tag/u-tag").then(o.bind(null,"5cea"))},uCellGroup:function(){return o.e("uview-ui/components/u-cell-group/u-cell-group").then(o.bind(null,"56bb"))},uCellItem:function(){return o.e("uview-ui/components/u-cell-item/u-cell-item").then(o.bind(null,"b9c3"))},uPopup:function(){return o.e("uview-ui/components/u-popup/u-popup").then(o.bind(null,"089a"))},uNumberBox:function(){return o.e("uview-ui/components/u-number-box/u-number-box").then(o.bind(null,"36f5"))},uButton:function(){return o.e("uview-ui/components/u-button/u-button").then(o.bind(null,"4d2a"))},uToast:function(){return o.e("uview-ui/components/u-toast/u-toast").then(o.bind(null,"1922"))},uModal:function(){return o.e("uview-ui/components/u-modal/u-modal").then(o.bind(null,"c27e"))},uCalendar:function(){return o.e("uview-ui/components/u-calendar/u-calendar").then(o.bind(null,"6785"))},uIcon:function(){return o.e("uview-ui/components/u-icon/u-icon").then(o.bind(null,"0922"))}},n=function(){var e=this,t=e.$createElement,o=(e._self._c,e.goodDetail.img?e.http.resourceUrl():null),a=0==e.currentIndex?e.__map(e.infoList,(function(t,o){var a=e.__get_orig(t),n={color:"#A5A5A5"},i={"font-size":"28rpx",color:"#333333"};return{$orig:a,a0:n,a1:i}})):null,n=0==e.currentIndex?{color:"#A5A5A5"}:null,i=0==e.currentIndex?{"font-size":"32rpx",color:"#333333"}:null,s=0!=e.currentIndex?e.__map(e.businesList,(function(t,o){var a=e.__get_orig(t),n={color:"#A5A5A5"},i={"font-size":"28rpx",color:"#333333"};return{$orig:a,a4:n,a5:i}})):null,u=0!=e.currentIndex?e.__map(e.wareHouseList,(function(t,o){var a=e.__get_orig(t),n={color:"#A5A5A5"},i={"font-size":"28rpx",color:"#333333"};return{$orig:a,a6:n,a7:i}})):null,r=0!=e.currentIndex?e.__map(e.saleList,(function(t,o){var a=e.__get_orig(t),n={color:"#A5A5A5"},i={"font-size":"28rpx",color:"#333333"};return{$orig:a,a8:n,a9:i}})):null,l=0!=e.currentIndex?e.__map(e.setList,(function(t,o){var a=e.__get_orig(t),n={color:"#A5A5A5"},i={"font-size":"28rpx",color:"#333333"};return{$orig:a,a10:n,a11:i}})):null;e._isMounted||(e.e0=function(t){e.showDate=!0},e.e1=function(t){e.showPopup=!0},e.e2=function(t){e.showModal=!0}),e.$mp.data=Object.assign({},{$root:{g0:o,l0:a,a2:n,a3:i,l1:s,l2:u,l3:r,l4:l}})},i=[]}},[["e62a","common/runtime","common/vendor"]]]);