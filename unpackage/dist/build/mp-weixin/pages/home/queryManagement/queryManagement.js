(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/queryManagement/queryManagement"],{"06f3":function(t,e,n){"use strict";(function(t){n("2cfb");o(n("66fd"));var e=o(n("6858"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"0cfb":function(t,e,n){"use strict";n.r(e);var o=n("6da8"),i=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},"1b0d":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o}));var o={uSearch:function(){return n.e("uview-ui/components/u-search/u-search").then(n.bind(null,"143d"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"0e5c"))},topNav:function(){return n.e("components/top-nav/top-nav").then(n.bind(null,"5f09"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"0922"))},uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"089a"))},card:function(){return n.e("components/card/card").then(n.bind(null,"bc44"))},uRow:function(){return n.e("uview-ui/components/u-row/u-row").then(n.bind(null,"5fa6"))},uCol:function(){return n.e("uview-ui/components/u-col/u-col").then(n.bind(null,"5d8b"))},uLine:function(){return n.e("uview-ui/components/u-line/u-line").then(n.bind(null,"2cae"))},formList:function(){return n.e("components/form-list/form-list").then(n.bind(null,"9a28"))},goodList:function(){return n.e("components/good-list/good-list").then(n.bind(null,"a545"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"3be9"))},uEmpty:function(){return n.e("uview-ui/components/u-empty/u-empty").then(n.bind(null,"6c67"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"d4ea"))},uMask:function(){return n.e("uview-ui/components/u-mask/u-mask").then(n.bind(null,"001e"))},uSelect:function(){return n.e("uview-ui/components/u-select/u-select").then(n.bind(null,"028a"))},uCalendar:function(){return n.e("uview-ui/components/u-calendar/u-calendar").then(n.bind(null,"6785"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.popupList,(function(e,n){var o=t.__get_orig(e),i=t.__map(e.list,(function(n,o){var i=t.__get_orig(n),s=t.judge(e.selected,n.id);return{$orig:i,m0:s}}));return{$orig:o,l0:i}})));t._isMounted||(t.e0=function(e){t.show=!0},t.e1=function(e){t.showDate=!0},t.e2=function(e){t.showDate=!0}),t.$mp.data=Object.assign({},{$root:{l1:n}})},s=[]},6858:function(t,e,n){"use strict";n.r(e);var o=n("1b0d"),i=n("0cfb");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("8212");var a,u=n("f0c5"),r=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,"7847350e",null,!1,o["a"],a);e["default"]=r.exports},"6da8":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){n.e("components/good-list/good-list").then(function(){return resolve(n("a545"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/top-nav/top-nav").then(function(){return resolve(n("5f09"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/card/card").then(function(){return resolve(n("bc44"))}.bind(null,n)).catch(n.oe)},a=function(){n.e("components/form-list/form-list").then(function(){return resolve(n("9a28"))}.bind(null,n)).catch(n.oe)},u={components:{goodList:o,topNav:i,card:s,formList:a},onLoad:function(e){if(e.store_house_id&&(this.fromList[0].id=e.store_house_id,this.fromList[0].value=e.store_house_name,e.time)){var n=new Date;this.start="".concat(n.getFullYear(),"-").concat(n.getMonth()+1,"-01"),this.end="".concat(n.getFullYear(),"-").concat(n.getMonth()+1,"-").concat(this.getMonthLastDateFn())}e.customer_id&&(this.fromList[1].id=e.customer_id),this.scrollHeight=this.$u.sys().windowHeight-t.upx2px(300),this.getScreenData(),this.getIndexStores()},onShow:function(){var e=this;t.$on("chooseStore",(function(n){console.log(n),e.storeName=n.item.store_name,e.storeId=n.item.id,t.$off("chooseStore"),e.clearGoodList()})),t.$on("chooseBrand",(function(n){var o=e.popupList[0].list.some((function(t){return t.id===n.item.id}));o||e.popupList[0].list.push(n.item),e.popupList[0].selected=n.item.id,t.$off("chooseBrand")})),t.$on("chooseWarehouse",(function(n){e.fromList[0].value=n.item.store_house_name,e.fromList[0].id=n.item.id,t.$off("chooseWarehouse")})),t.$on("chooseCustomer",(function(n){var o=getCurrentPages();3==o.length&&(e.fromList[1].value=n.item.name,e.fromList[1].id=n.item.id),t.$off("chooseCustomer")})),t.$on("chooseEmployees1",(function(n){e.fromList[2].value=n.item.name,e.fromList[2].id=n.item.id,t.$off("chooseEmployees1")})),t.$on("chooseEmployees2",(function(n){e.fromList[3].value=n.item.name,e.fromList[3].id=n.item.id,t.$off("chooseEmployees2")})),t.$on("back",(function(n){e.clearGoodList(),t.$off("back")}))},onPullDownRefresh:function(){this.clearGoodList()},data:function(){return{scrollHeight:1e3,keyword:"",navList:[{label:"库存量",number:0,unit:"件",url:"",isNav:!1,decimals:0},{label:"在库成本",number:0,unit:"元",url:"/pages/home/queryManagement/KCdetail",isNav:!0,decimals:2},{label:"历史总量",number:0,unit:"件",url:"/pages/home/queryManagement/HISdetail",isNav:!0,decimals:0},{label:"超期限定",number:0,unit:"件",url:"/pages/home/queryManagement/BYdetail",isNav:!0,decimals:0}],storeName:"全部店铺",showStoreList:!1,storeId:0,storeList:[{id:0,store_name:"全部店铺"}],screen:{currentIndex:0,list:[{name:"日期",status:-1},{name:"库存",status:0},{name:"价格",status:0}]},show:!1,popupList:[{name:"品牌",selected:"",isBrand:!0,list:[]},{name:"一级分类",selected:"",isBrand:!1,list:[]},{name:"二级分类",selected:"",isBrand:!1,list:[]},{name:"超期",selected:"",isBrand:!1,list:[]},{name:"来源",selected:"",isBrand:!1,list:[]},{name:"成色",selected:"",isBrand:!1,list:[]},{name:"库存",selected:"",isBrand:!1,list:[]}],fromList:[{type:"picker",name:"仓库",value:"",id:"",url:"/pages/home/goodsInStorage/Warehouse/Warehouse",isImport:!1},{type:"picker",name:"销售客户",value:"",id:"",url:"/pages/home/salesBilling/customerList/customerList",isImport:!1},{type:"picker",name:"入库人",value:"",id:"",url:"/pages/home/goodsInStorage/Employees/Employees?type=1",isImport:!1},{type:"picker",name:"回收人",value:"",id:"",url:"/pages/home/goodsInStorage/Employees/Employees?type=2",isImport:!1}],showDate:!1,start:"",end:"",min:"",max:"",page:1,last_page:"",goodList:[],status:"loading",iconType:"flower",loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"},urlData:{}}},methods:{getScreenData:function(){var t=this;this.http.get("/api/v1/Index/getScreenData",{},!0).then((function(e){1e3==e.code&&(t.popupList[0].list=e.data.brand,t.popupList[1].list=e.data.top_cate,t.popupList[3].list=e.data.time_up,t.popupList[4].list=e.data.type_from,t.popupList[5].list=e.data.type_condition,t.popupList[6].list=e.data.type_sell)}))},getScreenCate:function(t){var e=this;this.http.get("/api/v1/Index/getScreenCate",{top_cate_id:t},!0).then((function(t){1e3==t.code&&(e.popupList[2].list=t.data.cate)}))},getStoreLists:function(){var t=this;this.http.post("/api/v1/Common/getStoreLists",{},!0).then((function(e){1e3==e.code&&(t.storeList=t.storeList.concat(e.data))}))},getIndexStores:function(){var t=this;this.http.post("/api/v1/Common/getIndexStores",{},!0).then((function(e){1e3==e.code&&(t.storeName=e.data.your_store_name,t.storeId=e.data.your_store_id,t.getInfo())}))},getInfo:function(){var t=this;this.urlData={need_top_data:1,keyword:this.keyword,store_id:this.storeId,date_order:this.screen.list[0].status,sto_order:this.screen.list[1].status,price_order:this.screen.list[2].status,brand_id:this.popupList[0].selected.toString(),top_cate_id:this.popupList[1].selected.toString(),cate_id:this.popupList[2].selected.toString(),time_up:this.popupList[3].selected.toString(),type_from:this.popupList[4].selected.toString(),type_condition:this.popupList[5].selected.toString(),type_sell:this.popupList[6].selected.toString(),store_house_id:this.fromList[0].id,customer_id:this.fromList[1].id,sto_user_id:this.fromList[2].id,recovery_id:this.fromList[3].id,price_min:this.min,price_max:this.max,date_min:this.start||0,date_max:this.end||0,page:this.page},this.http.get("/api/v1/Index/searchIndex",this.urlData,!0).then((function(e){1e3==e.code&&(0==t.goodList.length?(t.goodList=e.data.good_data.good_data,t.last_page=e.data.good_data.last_page,t.navList[0].number=e.data.top_data.num_now,t.navList[1].number=e.data.top_data.total_cost_price.value,t.navList[2].number=e.data.top_data.num_history_total,t.navList[3].number=e.data.top_data.num_time_up,t.navList[1].unit=e.data.top_data.total_cost_price.unit):e.data.good_data.good_data.map((function(e){t.goodList.push(e)})),t.page>=t.last_page?t.status="nomore":t.status="loadmore")}))},scrolltolower:function(){var t=this;this.page>=this.last_page||(this.status="loading",this.page=++this.page,setTimeout((function(){t.getInfo()}),50))},clearGoodList:function(){this.status="loading",this.show=!1,this.page=1,this.last_page=1,this.goodList=[],this.getInfo(),t.stopPullDownRefresh()},chooseStore:function(t){console.log(t),this.storeName=t[0].label,this.storeId=t[0].value,this.clearGoodList()},debounce:function(t){this.$u.debounce(this.changeScreen(t),500)},changeScreen:function(t){this.status="loading";var e=this.screen.currentIndex;if(-1==e){var n=this.screen.list[t];return this.screen.currentIndex=t,n.status=-1,void this.clearGoodList()}var o=this.screen.list[e];if(e===t)return o.status=1===o.status?-1:1,this.clearGoodList();var i=this.screen.list[t];o.status=0,this.screen.currentIndex=t,i.status=-1,this.clearGoodList()},judge:function(t,e){return t===e},choose:function(t,e,n){1==n&&t.selected!=e.id?this.getScreenCate(e.id):1==n&&t.selected==e.id&&(this.popupList[2].list=[],this.popupList[2].selected=""),t.selected===e.id?t.selected="":(this.$set(t,"selected",e.id),console.log(t.selected.toString()||6))},dateChange:function(t){console.log(t),this.start=t.startDate,this.end=t.endDate},input:function(t){console.log(t),this.$set(this.fromList[t.index],"value",t.value)},reset:function(){this.show=!1,this.popupList.forEach((function(t){t.selected=""})),this.fromList.forEach((function(t){t.value="",t.id=""})),this.start="",this.end="",this.min="",this.max="",this.clearGoodList()},getMonthLastDateFn:function(t){var e=new Date,n=new Date(e.getFullYear(),e.getMonth()+1,0),o=n.getDate();return o}}};e.default=u}).call(this,n("543d")["default"])},8212:function(t,e,n){"use strict";var o=n("abbd"),i=n.n(o);i.a},abbd:function(t,e,n){}},[["06f3","common/runtime","common/vendor"]]]);