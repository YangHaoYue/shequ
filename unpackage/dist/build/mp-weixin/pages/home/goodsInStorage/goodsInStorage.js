(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/goodsInStorage/goodsInStorage"],{"115e":function(t,e,i){"use strict";var o=i("e270"),a=i.n(o);a.a},3339:function(t,e,i){"use strict";(function(t){i("2cfb");o(i("66fd"));var e=o(i("4c11"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"4c11":function(t,e,i){"use strict";i.r(e);var o=i("9bc8"),a=i("bfea");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("115e");var r,n=i("f0c5"),d=Object(n["a"])(a["default"],o["b"],o["c"],!1,null,"4f925c6e",null,!1,o["a"],r);e["default"]=d.exports},"9bc8":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var o={uUpload:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-upload/u-upload")]).then(i.bind(null,"c462"))},uTag:function(){return i.e("uview-ui/components/u-tag/u-tag").then(i.bind(null,"5cea"))},uInput:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-input/u-input")]).then(i.bind(null,"161c"))},formList:function(){return i.e("components/form-list/form-list").then(i.bind(null,"9a28"))},uToast:function(){return i.e("uview-ui/components/u-toast/u-toast").then(i.bind(null,"1922"))}},a=function(){var t=this,e=t.$createElement,i=(t._self._c,t.http.interfaceUrl()),o=t.showPri_img?t.http.interfaceUrl():null,a=t.__map(t.tagList,(function(e,i){var o=t.__get_orig(e),a=t.tagSelectedList.indexOf(e.id),s=t.tagSelectedList.indexOf(e.id),r=t.tagSelectedList.indexOf(e.id);return{$orig:o,g2:a,g3:s,g4:r}})),s=t.__map(t.attachmentList,(function(e,i){var o=t.__get_orig(e),a=t.attachmentSelectedList.indexOf(e.id),s=t.attachmentSelectedList.indexOf(e.id),r=t.attachmentSelectedList.indexOf(e.id);return{$orig:o,g5:a,g6:s,g7:r}}));t.$mp.data=Object.assign({},{$root:{g0:i,g1:o,l0:a,l1:s}})},s=[]},a017:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){i.e("components/form-list/form-list").then(function(){return resolve(i("9a28"))}.bind(null,i)).catch(i.oe)},a={components:{formList:o},onLoad:function(t){var e=new Date;this.toDay=this.http.dateFormat("YYYY-mm-dd",e),this.fromList[13].value=this.toDay,this.good_id=t.good_id||0,this.type_for=t.type_for||0,this.getInfo()},onShow:function(){var e=this;t.$on("chooseBrand",(function(i){console.log(i),e.fromList[1].value=i.item.brand_name,e.fromList[1].id=i.item.id,t.$off("chooseBrand")})),t.$on("chooseType",(function(i){e.fromList[2].value=i.item.cate_name,e.fromList[2].id=i.item.id,t.$off("chooseType")})),t.$on("chooseFineness",(function(i){e.fromList[3].value=i.item.label,e.fromList[3].id=i.item.id,t.$off("chooseFineness")})),t.$on("chooseSource",(function(i){e.fromList[10].value=i.item.val,e.fromList[10].id=i.item.id,t.$off("chooseSource")})),t.$on("chooseCustomer",(function(i){e.fromList[11].value=i.item.name,e.fromList[11].id=i.item.id,t.$off("chooseCustomer")})),t.$on("chooseWarehouse",(function(i){e.fromList[12].value=i.item.store_house_name,e.fromList[12].id=i.item.id,t.$off("chooseWarehouse")})),t.$on("chooseEmployees1",(function(i){e.fromList[15].value=i.item.name,e.fromList[15].id=i.item.id,t.$off("chooseEmployees1")})),t.$on("chooseEmployees2",(function(i){e.fromList[16].value=i.item.name,e.fromList[16].id=i.item.id,t.$off("chooseEmployees2")}))},computed:{tagTitle:function(){var t=this,e="";return this.tagList.forEach((function(i){-1!=t.tagSelectedList.indexOf(i.id)&&(e+=i.content)})),e+this.otherTag},attachmentTitle:function(){var t=this,e="";return this.attachmentList.forEach((function(i){-1!=t.attachmentSelectedList.indexOf(i.id)&&(e+=i.content)})),e},counterPrice:function(){return this.fromList[9].value?"专柜价"+this.fromList[9].value:""},descAll:function(){var t="";return t=this.fromList[1].value+this.fromList[2].value+this.fromList[3].value+this.attachmentTitle+this.tagTitle+this.counterPrice+"我们现在好价"+this.fromList[8].value,t}},watch:{descAll:function(t,e){""!=this.good_id&&""!=this.textAreaValue||(this.textAreaValue=t)}},data:function(){return{good_id:"",type_for:"",toDay:"",action:"/api/v1/Common/fileUploader",header:{Authorization:"Bearer "+this.http.getToken()},fileList:[],lists:[],showPri_img:!0,scfileList:[],sclists:[],videoContext:"",videoList:[],resource:"",showTextArea:!1,textAreaValue:"",tagList:[],tagSelectedList:[],otherTag:"",fromList:[{type:"input2",name:"商品名称",value:"",id:"",placeholder:"请输入商品名字",inputType:"text",isImport:!0},{type:"picker",name:"所属品牌",value:"",id:"",url:"/pages/home/goodsInStorage/brandList/brandList",isImport:!0},{type:"picker",name:"所属类别",value:"",id:"",url:"/pages/home/goodsInStorage/typeList/typeList",isImport:!0},{type:"picker",name:"商品成色",value:"二手物品",id:2,url:"/pages/home/goodsInStorage/finenessList/finenessList",isImport:!0},{type:"payPicker",name:"商品类型",value:"现代",id:0,list:[{value:0,label:"现代"},{value:1,label:"古中"}],isImport:!0},{type:"input",name:"成本价",value:"1",id:"",placeholder:"请输入成本价",inputType:"digit",isImport:!0},{type:"input",name:"共享价",value:"1",id:"",placeholder:"请输入共享价",inputType:"digit",isImport:!0},{type:"input",name:"同行价",value:"1",id:"",placeholder:"请输入同行价",inputType:"digit",isImport:!0},{type:"input",name:"销售价",value:"1",id:"",placeholder:"请输入销售价",inputType:"digit",isImport:!0},{type:"input",name:"专柜价",value:"",id:"",placeholder:"请输入专柜价",inputType:"digit",isImport:!1},{type:"picker",name:"商品来源",value:"",id:"",url:"/pages/home/goodsInStorage/goodsSource/goodsSource",isImport:!0},{type:"picker",name:"商品来源方",value:"",id:"",url:"/pages/home/salesBilling/customerList/customerList",isImport:!0,disable:!1},{type:"picker",name:"存放仓库",value:"",id:"",url:"/pages/home/goodsInStorage/Warehouse/Warehouse",isImport:!0},{type:"datePicker",name:"入库时间",value:"",isImport:!0},{type:"input",name:"商品数量",value:"1",id:"",placeholder:"请输入商品数量",inputType:"number",isImport:!0},{type:"picker",name:"入库人",value:"",id:"",url:"/pages/home/goodsInStorage/Employees/Employees?type=1",isImport:!0},{type:"picker",name:"回收人",value:"",id:"",url:"/pages/home/goodsInStorage/Employees/Employees?type=2",isImport:!0},{type:"input",name:"商品序列号",value:"",id:"",placeholder:"请输入商品序列号",inputType:"text",isImport:!1},{type:"input",name:"规格型号",value:"",id:"",placeholder:"请输入规格型号",inputType:"text",isImport:!1},{type:"input",name:"商品颜色",value:"",id:"",placeholder:"请输入商品颜色",inputType:"text",isImport:!1},{type:"input",name:"材料说明",value:"",id:"",placeholder:"请输入材料说明",inputType:"text",isImport:!1},{type:"input",name:"商品备注",value:"",id:"",placeholder:"请输入商品备注",inputType:"text",isImport:!1},{type:"payPicker",name:"是否展现给其他同行",value:"",id:"",list:[],isImport:!1}],type_condition:"",attachmentList:[],attachmentSelectedList:[]}},methods:{getInfo:function(){var e=this;this.http.post("/api/v1/Storage/getStoOption",{good_id:this.good_id,type_for:this.type_for}).then((function(i){1e3==i.code?(t.setStorageSync("goodsSourceData",i.data.type_from),e.tagList=i.data.care,e.attachmentList=i.data.annex,e.type_condition=i.data.type_condition,e.fromList[4].list=i.data.type_times.map((function(t,i){return 0==i&&(e.fromList[4].value=t.val,e.fromList[4].id=t.id),{value:t.id,label:t.val}})),e.fromList[22].list=i.data.visible_out.map((function(t,i){return 0==i&&(e.fromList[22].value=t.val,e.fromList[22].id=t.id),{value:t.id,label:t.val}})),1==e.type_for&&e.$set(e.fromList[14],"type",""),0!=e.good_id?(e.textAreaValue=i.data.desc,e.tagSelectedList=i.data.care_fill_ids,e.attachmentSelectedList=i.data.annex_ids,e.showPri_img=i.data.pri_img_arr.is_show,e.scfileList=i.data.pri_img_arr.pri_img.map((function(t){return e._formatImg(t)})),e.fileList=i.data.img.map((function(t){return e._formatImg(t)})),i.data.pri_video&&"[]"!=i.data.pri_video&&e.videoList.push({tempFilePath:e.http.resourceUrl()+i.data.pri_video}),i.data.pri_video&&"[]"!=i.data.pri_video&&(e.resource=i.data.pri_video),e.fromList[0].value=i.data.good_name,e.fromList[1].value=i.data.brand_fill_arr.brand_name,e.fromList[1].id=i.data.brand_fill_arr.brand_id,e.fromList[2].value=i.data.cate_fill_arr.cate_name,e.fromList[2].id=i.data.cate_fill_arr.cate_id,i.data.type_condition.map((function(t){t.id==i.data.type_condition_id&&(e.fromList[3].value=t.val)})),e.fromList[3].id=i.data.type_condition_id,i.data.type_times.map((function(t){t.id==i.data.type_times_id&&(e.fromList[4].value=t.val)})),e.fromList[4].id=i.data.type_times_id,e.fromList[5].value=i.data.cost_price,e.fromList[6].value=i.data.share_price,e.fromList[7].value=i.data.peer_price,e.fromList[8].value=i.data.sell_price,e.fromList[9].value=i.data.counter_price,i.data.type_from.map((function(t){t.id==i.data.type_from_id&&(e.fromList[10].value=t.val)})),e.fromList[10].id=i.data.type_from_id,e.fromList[11].value=i.data.customer_option.customer_name,e.fromList[11].id=i.data.customer_option.customer_id,e.fromList[11].disable=!i.data.customer_option.can_edit,i.data.store_house.map((function(t){t.id==i.data.store_house_id&&(e.fromList[12].value=t.name)})),e.fromList[12].id=i.data.store_house_id,e.$set(e.fromList[13],"value",i.data.date_in),e.$set(e.fromList[14],"value",i.data.num_now),i.data.user_for_choose.map((function(t){t.id==i.data.sto_user_id&&(e.fromList[15].value=t.name)})),e.fromList[15].id=i.data.sto_user_id,i.data.user_for_choose.map((function(t){t.id==i.data.rec_user_id&&(e.fromList[16].value=t.name)})),e.fromList[16].id=i.data.rec_user_id,e.fromList[17].value=i.data.serial_num,e.fromList[18].value=i.data.specs,e.fromList[19].value=i.data.color,e.fromList[20].value=i.data.material_info,e.fromList[21].value=i.data.remark,i.data.visible_out.map((function(t){t.id==i.data.visible_out_id&&(e.fromList[22].value=t.val)})),e.fromList[22].id=i.data.visible_out_id):(e.fromList[12].value=i.data.store_house.name,e.fromList[12].id=i.data.store_house.id,i.data.user_for_choose.map((function(t){t.id==i.data.sto_user_id&&(e.fromList[15].value=t.name,e.fromList[15].id=t.id,e.fromList[16].value=t.name,e.fromList[16].id=t.id)})))):e.$refs.uToast.show({title:i.msg,type:"error"})}))},_formatImg:function(t){return{url:this.http.resourceUrl()+t}},onListChange:function(t){console.log("onListChange",t),this.lists=t},onscListChange:function(t){console.log("onListChange",t),this.sclists=t},chooseVideo:function(){var e=this;t.chooseMedia({count:1,mediaType:["video"],sourceType:["camera","album"],maxDuration:15,success:function(t){if(t.tempFiles[0].duration>15)return e.$refs.uToast.show({title:"请选择或拍摄15s以下的视频！",type:"warning"});console.log(t),e.videoList=t.tempFiles,e.http.uploadFile("/api/v1/Common/fileUploader",t.tempFiles[0].tempFilePath,"video").then((function(t){1e3==t.code&&(e.$refs.uToast.show({title:"上传成功",type:"success"}),e.resource=t.data.path,console.log(t),console.log(e.resource))}))}})},DelVideo:function(){this.videoList=[],this.resource=""},playVideo:function(){this.videoContext=t.createVideoContext("myvideo",this),this.videoContext.requestFullScreen(),this.videoContext.play()},fullscreenchange:function(t){t.detail.fullScreen||this.videoContext.pause()},preview:function(t,e,i){var o=e[i];e.splice(i,1),e.unshift(o)},selectTag:function(t,e){var i=t.id,o=this.tagSelectedList.indexOf(i);if(o>-1)return this.tagSelectedList.splice(o,1);this.tagSelectedList.push(i)},dateChange:function(t){this.$set(this.fromList[t.index],"value",t.value)},input:function(t){this.$set(this.fromList[t.index],"value",t.value),0==t.index&&this.goodNameUsage()},payChange:function(t){console.log(t),this.$set(this.fromList[t.index],"value",t.value.label),this.$set(this.fromList[t.index],"id",t.value.value)},goodNameUsage:function(){var t=this;this.http.get("/api/v1/Storage/goodNameUsage",{keyword:this.fromList[0].value},!0).then((function(e){1e3==e.code&&(e.data.brand_fill_arr.brand_id>0&&(t.fromList[1].value=e.data.brand_fill_arr.brand_name,t.fromList[1].id=e.data.brand_fill_arr.brand_id),e.data.cate_fill_arr.cate_id>0&&(t.fromList[2].value=e.data.cate_fill_arr.cate_name,t.fromList[2].id=e.data.cate_fill_arr.cate_id),t.type_condition.map((function(i){i.id==e.data.type_condition&&(t.fromList[3].value=i.val,t.fromList[3].id=i.id)})))}))},selectAttachment:function(t,e){var i=t.id,o=this.attachmentSelectedList.indexOf(i);if(o>-1)return this.attachmentSelectedList.splice(o,1);this.attachmentSelectedList.push(i)},inputTextArea:function(){this.showTextArea=!0},hideTextArea:function(){this.showTextArea=!1},submit:function(){var t=this;console.log(this.fromList);var e=[];this.lists.map((function(t){t.response&&1e3==t.response.code?e.push(t.response.data.path):t.error||100!=t.progress||e.push(t.url)}));var i=[];this.sclists.map((function(t){t.response&&1e3==t.response.code?i.push(t.response.data.path):t.error||100!=t.progress||i.push(t.url)})),this.http.post("/api/v1/Storage/goodSto",{pic:e[0],img:e,pri_img:i,type_for:this.type_for,good_id:this.good_id,good_name:this.fromList[0].value,brand_id:this.fromList[1].id,cate_id:this.fromList[2].id||0,type_condition:this.fromList[3].id,type_times:this.fromList[4].id||0,cost_price:this.fromList[5].value,share_price:this.fromList[6].value,peer_price:this.fromList[7].value,sell_price:this.fromList[8].value,counter_price:this.fromList[9].value||0,type_from:this.fromList[10].id,from_cus_id:this.fromList[11].id||0,store_house_id:this.fromList[12].id,date_in:this.fromList[13].value,num:this.fromList[14].value,sto_user_id:this.fromList[15].id,rec_user_id:this.fromList[16].id,serial_num:this.fromList[17].value,specs:this.fromList[18].value,color:this.fromList[19].value,material_info:this.fromList[20].value,remark:this.fromList[21].value,visible_out:this.fromList[22].id,annex_ids:this.attachmentSelectedList,care_ids:this.tagSelectedList,desc:this.textAreaValue||descAll,new_care_condition:this.otherTag,pri_video:this.resource}).then((function(e){1e3==e.code?t.$refs.uToast.show({title:"提交成功",type:"success",back:!0}):t.$refs.uToast.show({title:e.msg,type:"error"})}))}}};e.default=a}).call(this,i("543d")["default"])},bfea:function(t,e,i){"use strict";i.r(e);var o=i("a017"),a=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=a.a},e270:function(t,e,i){}},[["3339","common/runtime","common/vendor"]]]);