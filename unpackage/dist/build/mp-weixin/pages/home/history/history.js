(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/history/history"],{"16e9":function(e,t,n){"use strict";n.r(t);var o=n("1ad3"),i=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=i.a},"1ad3":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){n.e("components/good-list/good-list").then(function(){return resolve(n("a545"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/card/card").then(function(){return resolve(n("bc44"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/form-list/form-list").then(function(){return resolve(n("9a28"))}.bind(null,n)).catch(n.oe)},u={components:{goodList:o,card:i,formList:s},onLoad:function(t){t.recovery_id&&(this.screen.currentIndex=t.currentIndex,this.recovery_id=t.recovery_id,this.type_from_arr=JSON.parse(decodeURIComponent(t.type_from_arr))),t.store_house_id&&(this.screen.currentIndex=t.currentIndex,this.fromList[0].id=t.store_house_id),t.good_id&&(this.screen.currentIndex=t.currentIndex,this.good_id=t.good_id),t.customer_id&&(this.screen.currentIndex=t.currentIndex,this.fromList[1].id=t.customer_id),this.scrollHeight=this.$u.sys().windowHeight-e.upx2px(180),this.getScreenData(),this.getInfo()},onShow:function(){var t=this;e.$on("chooseWarehouse",(function(n){t.fromList[0].value=n.item.store_house_name,t.fromList[0].id=n.item.id,e.$off("chooseWarehouse")})),e.$on("chooseCustomer",(function(n){t.fromList[1].value=n.item.name,t.fromList[1].id=n.item.id,e.$off("chooseCustomer")})),e.$on("chooseEmployees1",(function(n){t.fromList[2].value=n.item.name,t.fromList[2].id=n.item.id,e.$off("chooseEmployees1")}))},onPullDownRefresh:function(){this.clearGoodList()},onReachBottom:function(){var e=this;this.page>=this.last_page||(this.status="loading",this.page=++this.page,setTimeout((function(){e.getInfo()}),100))},data:function(){return{scrollHeight:0,recovery_id:"",type_from_arr:"",good_id:"",keyword:"",screen:{currentIndex:0,list:[{name:"回收",status:0,number:0},{name:"寄售",status:1,number:0},{name:"改库存",status:2,number:0},{name:"改成本",status:3,number:0}]},show:!1,popupList:[{name:"品牌",selected:"",isBrand:!0,list:[]},{name:"一级分类",selected:"",isBrand:!1,list:[]},{name:"二级分类",selected:"",isBrand:!1,list:[]},{name:"来源",selected:"",isBrand:!1,list:[]}],fromList:[{type:"picker",name:"仓库",value:"",id:"",url:"/pages/home/goodsInStorage/Warehouse/Warehouse",isImport:!1},{type:"picker",name:"相关客户",value:"",id:"",url:"/pages/home/salesBilling/customerList/customerList",isImport:!1},{type:"picker",name:"相关员工",value:"",id:"",url:"/pages/home/goodsInStorage/Employees/Employees?type=1",isImport:!1}],page:1,last_page:"",goodList:[],status:"loading",iconType:"flower",loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"}}},methods:{getScreenData:function(){var e=this;this.http.get("/api/v1/Index/getScreenData",{},!0).then((function(t){1e3==t.code&&(e.popupList[0].list=t.data.brand,e.popupList[1].list=t.data.top_cate,e.popupList[3].list=t.data.type_from)}))},getScreenCate:function(e){var t=this;this.http.get("/api/v1/Index/getScreenCate",{top_cate_id:e},!0).then((function(e){1e3==e.code&&(t.popupList[2].list=e.data.cate)}))},getInfo:function(){var e=this;this.http.post("/api/v1/History/searchIndex",{keyword:this.keyword,type_page:this.screen.currentIndex,good_id:this.good_id,recovery_id:this.recovery_id,type_from_arr:this.type_from_arr,brand_id:this.popupList[0].selected.toString(),top_cate_id:this.popupList[1].selected.toString()||0,cate_id:this.popupList[2].selected.toString(),type_from:this.popupList[3].selected.toString()||6,store_house_id:this.fromList[0].id||0,customer_id:this.fromList[1].id||0,user_id:this.fromList[2].id||0,page:this.page},!0).then((function(t){1e3==t.code?(0==e.goodList.length?(e.goodList=t.data.main.good_data,e.last_page=t.data.main.last_page,0==e.screen.list[0].number&&(e.screen.list[0].number=t.data.top.num_rec),0==e.screen.list[1].number&&(e.screen.list[1].number=t.data.top.num_cons),0==e.screen.list[2].number&&(e.screen.list[2].number=t.data.top.num_edit_num),0==e.screen.list[3].number&&(e.screen.list[3].number=t.data.top.num_edit_price)):e.goodList=e.goodList.concat(t.data.main.good_data),e.page>=e.last_page?e.status="nomore":e.status="loadmore"):e.$refs.uToast.show({title:t.msg,type:"error",back:!0})}))},scrolltolower:function(){var e=this;this.page>=this.last_page||(this.status="loading",this.page=++this.page,setTimeout((function(){e.getInfo()}),50))},clearGoodList:function(){this.show=!1,this.page=1,this.last_page=1,this.goodList=[],this.status="loading",this.getInfo(),e.stopPullDownRefresh()},changeScreen:function(e){this.screen.currentIndex=e.status,this.clearGoodList()},choose:function(e,t,n){1==n&&e.selected!=t.id?this.getScreenCate(t.id):1==n&&e.selected==t.id&&(this.popupList[2].list=[],this.popupList[2].selected=""),e.selected==t.id?e.selected="":this.$set(e,"selected",t.id)},reset:function(){this.show=!1,this.popupList.forEach((function(e){e.selected=""})),this.fromList.forEach((function(e){e.value="",e.id=""})),this.clearGoodList()}}};t.default=u}).call(this,n("543d")["default"])},"504e":function(e,t,n){"use strict";(function(e){n("2cfb");o(n("66fd"));var t=o(n("9a6a"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"7f5e":function(e,t,n){},"9a6a":function(e,t,n){"use strict";n.r(t);var o=n("c286"),i=n("16e9");for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);n("fd77");var u,r=n("f0c5"),a=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);t["default"]=a.exports},c286:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var o={uSearch:function(){return n.e("uview-ui/components/u-search/u-search").then(n.bind(null,"143d"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"0e5c"))},uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"089a"))},card:function(){return n.e("components/card/card").then(n.bind(null,"bc44"))},uRow:function(){return n.e("uview-ui/components/u-row/u-row").then(n.bind(null,"5fa6"))},uCol:function(){return n.e("uview-ui/components/u-col/u-col").then(n.bind(null,"5d8b"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"0922"))},uLine:function(){return n.e("uview-ui/components/u-line/u-line").then(n.bind(null,"2cae"))},formList:function(){return n.e("components/form-list/form-list").then(n.bind(null,"9a28"))},goodList:function(){return n.e("components/good-list/good-list").then(n.bind(null,"a545"))},uTag:function(){return n.e("uview-ui/components/u-tag/u-tag").then(n.bind(null,"5cea"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"3be9"))},uEmpty:function(){return n.e("uview-ui/components/u-empty/u-empty").then(n.bind(null,"6c67"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"d4ea"))},uMask:function(){return n.e("uview-ui/components/u-mask/u-mask").then(n.bind(null,"001e"))},uToast:function(){return n.e("uview-ui/components/u-toast/u-toast").then(n.bind(null,"1922"))}},i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.show=!0})},s=[]},fd77:function(e,t,n){"use strict";var o=n("7f5e"),i=n.n(o);i.a}},[["504e","common/runtime","common/vendor"]]]);