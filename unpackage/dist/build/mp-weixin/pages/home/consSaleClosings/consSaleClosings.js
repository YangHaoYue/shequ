(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/consSaleClosings/consSaleClosings"],{"39a7":function(t,n,e){"use strict";e.r(n);var o=e("aad0"),i=e("ff9f");for(var s in i)"default"!==s&&function(t){e.d(n,t,(function(){return i[t]}))}(s);e("e21b");var u,a=e("f0c5"),c=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);n["default"]=c.exports},aad0:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return o}));var o={uSearch:function(){return e.e("uview-ui/components/u-search/u-search").then(e.bind(null,"143d"))},uImage:function(){return e.e("uview-ui/components/u-image/u-image").then(e.bind(null,"0e5c"))},topNav:function(){return e.e("components/top-nav/top-nav").then(e.bind(null,"5f09"))},uSticky:function(){return e.e("uview-ui/components/u-sticky/u-sticky").then(e.bind(null,"8072"))},uPopup:function(){return e.e("uview-ui/components/u-popup/u-popup").then(e.bind(null,"089a"))},card:function(){return e.e("components/card/card").then(e.bind(null,"bc44"))},uRow:function(){return e.e("uview-ui/components/u-row/u-row").then(e.bind(null,"5fa6"))},uCol:function(){return e.e("uview-ui/components/u-col/u-col").then(e.bind(null,"5d8b"))},uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,"0922"))},uLine:function(){return e.e("uview-ui/components/u-line/u-line").then(e.bind(null,"2cae"))},formList:function(){return e.e("components/form-list/form-list").then(e.bind(null,"9a28"))},uGap:function(){return e.e("uview-ui/components/u-gap/u-gap").then(e.bind(null,"3be9"))},goodList:function(){return e.e("components/good-list/good-list").then(e.bind(null,"a545"))},uButton:function(){return e.e("uview-ui/components/u-button/u-button").then(e.bind(null,"4d2a"))},uEmpty:function(){return e.e("uview-ui/components/u-empty/u-empty").then(e.bind(null,"6c67"))},uLoadmore:function(){return e.e("uview-ui/components/u-loadmore/u-loadmore").then(e.bind(null,"d4ea"))},uMask:function(){return e.e("uview-ui/components/u-mask/u-mask").then(e.bind(null,"001e"))}},i=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__map(t.popupList,(function(n,e){var o=t.__get_orig(n),i=t.__map(n.list,(function(e,o){var i=t.__get_orig(e),s=t.judge(n.selected,e.id);return{$orig:i,m0:s}}));return{$orig:o,l0:i}})));t._isMounted||(t.e0=function(n){t.show=!0}),t.$mp.data=Object.assign({},{$root:{l1:e}})},s=[]},c93b:function(t,n,e){},d797:function(t,n,e){"use strict";(function(t){e("2cfb");o(e("66fd"));var n=o(e("39a7"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},e21b:function(t,n,e){"use strict";var o=e("c93b"),i=e.n(o);i.a},f9d7:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){e.e("components/good-list/good-list").then(function(){return resolve(e("a545"))}.bind(null,e)).catch(e.oe)},i=function(){e.e("components/top-nav/top-nav").then(function(){return resolve(e("5f09"))}.bind(null,e)).catch(e.oe)},s=function(){e.e("components/card/card").then(function(){return resolve(e("bc44"))}.bind(null,e)).catch(e.oe)},u=function(){e.e("components/form-list/form-list").then(function(){return resolve(e("9a28"))}.bind(null,e)).catch(e.oe)},a={components:{goodList:o,topNav:i,card:s,formList:u},onLoad:function(){this.scrollHeight=this.$u.sys().windowHeight-t.upx2px(300),this.getScreenData(),this.getInfo()},onShow:function(){var n=this;t.$on("chooseBrand",(function(e){var o=n.popupList[0].list.some((function(t){return t.id===e.item.id}));o||n.popupList[0].list.push(e.item),n.popupList[0].selected=e.item.id,t.$off("chooseBrand")})),t.$on("chooseCustomer",(function(e){n.fromList[0].value=e.item.name,n.fromList[0].id=e.item.id,t.$off("chooseCustomer")})),t.$on("chooseEmployees2",(function(e){n.fromList[1].value=e.item.name,n.fromList[1].id=e.item.id,t.$off("chooseEmployees2")})),t.$on("back",(function(){setTimeout((function(){n.clearGoodList()}),2e3),t.$off("back")}))},beforeDestroy:function(){t.$off("chooseBrand"),t.$off("chooseCustomer"),t.$off("chooseEmployees2"),t.$off("back")},onPullDownRefresh:function(){this.clearGoodList()},onReachBottom:function(){var t=this;this.page>=this.last_page||(this.status="loading",this.page=++this.page,setTimeout((function(){t.clearGoodList()}),2e3))},data:function(){return{scrollHeight:0,keyword:"",navList:[{label:"金额",number:0,unit:"元",url:"",isNav:!1,decimals:2},{label:"件数",number:0,unit:"件",url:"",isNav:!1,decimals:0},{label:"人数",number:0,unit:"个",url:"",isNav:!1,decimals:0},{label:"商品数",number:0,unit:"种",url:"",isNav:!1,decimals:0}],screen:{currentIndex:0,list:[{name:"未结款",status:0},{name:"已结款",status:1}]},show:!1,popupList:[{name:"品牌",selected:"",isBrand:!0,list:[]},{name:"一级分类",selected:"",isBrand:!1,list:[]},{name:"二级分类",selected:"",isBrand:!1,list:[]}],fromList:[{type:"picker",name:"寄卖人",value:"",id:"",url:"/pages/home/salesBilling/customerList/customerList",isImport:!1},{type:"picker",name:"入库人",value:"",id:"",url:"/pages/home/goodsInStorage/Employees/Employees?type=2",isImport:!1}],page:1,last_page:"",goodList:[],status:"loading",iconType:"flower",loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"}}},methods:{getScreenData:function(){var t=this;this.http.get("/api/v1/Consign/getConsignScreenData",{},!0).then((function(n){1e3==n.code&&(t.popupList[0].list=n.data.brand,t.popupList[1].list=n.data.top_cate)}))},getScreenCate:function(t){var n=this;this.http.get("/api/v1/Index/getScreenCate",{top_cate_id:t},!0).then((function(t){1e3==t.code&&(n.popupList[2].list=t.data.cate)}))},getInfo:function(){var t=this;this.http.get("/api/v1/Consign/consignLogs",{need_top_data:1,keyword:this.keyword,status_pay:this.screen.currentIndex,brand_id:this.popupList[0].selected.toString(),top_cate_id:this.popupList[1].selected.toString()||0,cate_id:this.popupList[2].selected.toString(),customer_id:this.fromList[0].id,sto_user_id:this.fromList[1].id,page:this.page},!0).then((function(n){1e3==n.code&&(0==t.goodList.length?(t.goodList=n.data.main.consign_data,t.last_page=n.data.main.last_page,t.navList[0].number=n.data.top.total_price.value,t.navList[1].number=n.data.top.total_num,t.navList[2].number=n.data.top.cus_num,t.navList[3].number=n.data.top.good_num,t.navList[0].unit=n.data.top.total_price.unit):n.data.main.consign_data.map((function(n){t.goodList.push(n)})),t.page>=t.last_page?t.status="nomore":t.status="loadmore",t.show=!1)}))},scrolltolower:function(){var t=this;this.page>=this.last_page||(this.status="loading",this.page=++this.page,setTimeout((function(){t.getInfo()}),50))},clearGoodList:function(){this.show=!1,this.page=1,this.last_page=1,this.goodList=[],this.status="loading",this.getInfo(),t.stopPullDownRefresh()},changeScreen:function(t){this.screen.currentIndex=t.status,this.clearGoodList()},judge:function(t,n){return t===n},choose:function(t,n,e){1==e&&t.selected!=n.id?this.getScreenCate(n.id):1==e&&t.selected==n.id&&(this.popupList[2].list=[],this.popupList[2].selected=""),t.selected==n.id?t.selected="":this.$set(t,"selected",n.id)},reset:function(){this.show=!1,this.popupList.forEach((function(t){t.selected=""})),this.fromList.forEach((function(t){t.value="",t.id=""})),this.clearGoodList()},toBulk:function(n){t.navigateTo({url:"/pages/home/consSaleClosings/bulkClosings/bulkClosings?customer_id=".concat(n)})},payment:function(n){t.navigateTo({url:"/pages/home/consSaleClosings/bulkClosings/Payment?consign_ids=".concat(encodeURIComponent(JSON.stringify(n)))})}}};n.default=a}).call(this,e("543d")["default"])},ff9f:function(t,n,e){"use strict";e.r(n);var o=e("f9d7"),i=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(n,t,(function(){return o[t]}))}(s);n["default"]=i.a}},[["d797","common/runtime","common/vendor"]]]);