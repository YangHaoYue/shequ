(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/WarehouseManagement/WarehouseManagement"],{"07a3":function(t,e,n){"use strict";(function(t){n("2cfb");s(n("66fd"));var e=s(n("b161"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},1480:function(t,e,n){"use strict";n.r(e);var s=n("c179"),o=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);e["default"]=o.a},b161:function(t,e,n){"use strict";n.r(e);var s=n("bd82"),o=n("1480");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("f4c0");var i,u=n("f0c5"),r=Object(u["a"])(o["default"],s["b"],s["c"],!1,null,"ae6416f4",null,!1,s["a"],i);e["default"]=r.exports},bd82:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s}));var s={uSticky:function(){return n.e("uview-ui/components/u-sticky/u-sticky").then(n.bind(null,"8072"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"0922"))},inventoryList:function(){return n.e("components/inventory-list/inventory-list").then(n.bind(null,"f045"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"d4ea"))},uMask:function(){return n.e("uview-ui/components/u-mask/u-mask").then(n.bind(null,"001e"))},uToast:function(){return n.e("uview-ui/components/u-toast/u-toast").then(n.bind(null,"1922"))},uCalendar:function(){return n.e("uview-ui/components/u-calendar/u-calendar").then(n.bind(null,"6785"))}},o=function(){var t=this,e=t.$createElement;t._self._c},a=[]},c179:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){n.e("components/inventory-list/inventory-list").then(function(){return resolve(n("f045"))}.bind(null,n)).catch(n.oe)},o={components:{inventoryList:s},onLoad:function(){this.clearGoodList()},onShow:function(){var e=this;t.$on("whBack",(function(n){e.clearGoodList(),t.$off("whBack")}))},beforeDestroy:function(){t.$off("whBack")},onReachBottom:function(){var t=this;this.page>=this.last_page||(this.status="loading",this.page=++this.page,setTimeout((function(){t.getInfo()}),100))},data:function(){return{screen:{currentIndex:-1,list:[{name:"库存",status:0},{name:"本月入库",status:0},{name:"总成本",status:0}]},last_page:1,page:1,list:[],status:"loading",iconType:"flower",loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"}}},methods:{getInfo:function(){var t=this;this.http.get("/api/v1/StoreHouse/listsPage",{stock_num_order:this.screen.list[0].status,stock_num_month_order:this.screen.list[1].status,total_cost_price_order:this.screen.list[2].status,page:this.page},!0).then((function(e){if(1e3==e.code){if(0==t.list.length)t.list=e.data.page_data.store_house_data.map((function(e){return t._formatList(e)})),t.last_page=e.data.page_data.last_page;else{var n=e.data.page_data.store_house_data.map((function(e){return t._formatList(e)}));t.list=t.list.concat(n)}t.page>=t.last_page?t.status="nomore":t.status="loadmore"}}))},_formatList:function(t){return{warehouseName:t.name,id:t.id,message:[{title:"库存",value:t.stock_count,url:"/pages/home/queryManagement/queryManagement?store_house_id=".concat(t.id,"&store_house_name=").concat(t.name)},{title:"本月入库",value:t.stock_this_month,url:"/pages/home/queryManagement/queryManagement?store_house_id=".concat(t.id,"&store_house_name=").concat(t.name,"&time=").concat(this.http.isShen())},{title:"总成本",value:t.total_value+"元",url:"/pages/home/queryManagement/queryManagement?store_house_id=".concat(t.id)}],remark:t.remark}},navigate:function(e){t.navigateTo({url:"/pages/home/queryManagement/queryManagement?store_house_id=".concat(e.id,"&store_house_name=").concat(e.warehouseName),success:function(t){},fail:function(){},complete:function(){}})},clearGoodList:function(){this.show=!1,this.page=1,this.last_page=1,this.list=[],this.status="loading",this.getInfo()},changeScreen:function(t){var e=this.screen.currentIndex;if(-1==e){var n=this.screen.list[t];return this.screen.currentIndex=t,n.status=-1,void this.clearGoodList()}var s=this.screen.list[e];if(e===t)return s.status=1===s.status?-1:1,this.clearGoodList();var o=this.screen.list[t];s.status=0,this.screen.currentIndex=t,o.status=-1,this.clearGoodList()},reset:function(){-1!=this.screen.currentIndex&&(this.screen.list[this.screen.currentIndex].status=0,this.clearGoodList())},delet:function(t){var e=this;this.http.modal("提示","确认要删除此仓库吗?",!0,(function(n){n&&e.http.get("/api/v1/StoreHouse/deleteStoHouse",{store_house_id:t}).then((function(t){1e3==t.code?(e.$refs.uToast.show({title:t.msg,type:"success"}),e.clearGoodList()):e.$refs.uToast.show({title:t.msg,type:"error"})}))}),"#FE8702")}}};e.default=o}).call(this,n("543d")["default"])},e53f:function(t,e,n){},f4c0:function(t,e,n){"use strict";var s=n("e53f"),o=n.n(s);o.a}},[["07a3","common/runtime","common/vendor"]]]);