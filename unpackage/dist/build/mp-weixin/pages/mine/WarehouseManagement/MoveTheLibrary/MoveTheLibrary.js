(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/WarehouseManagement/MoveTheLibrary/MoveTheLibrary"],{"1b9e":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){i.e("components/good-list/good-list").then(function(){return resolve(i("a545"))}.bind(null,i)).catch(i.oe)},o=function(){i.e("components/card/card").then(function(){return resolve(i("bc44"))}.bind(null,i)).catch(i.oe)},s=function(){i.e("components/form-list/form-list").then(function(){return resolve(i("9a28"))}.bind(null,i)).catch(i.oe)},u={components:{goodList:n,card:o,formList:s},onLoad:function(e){console.log(e),this.store_house_id=e.store_house_id,this.warehouseName=e.warehouseName,this.getScreenData(),this.getInfo()},onShow:function(){var t=this;e.$on("chooseBrand",(function(i){var n=t.popupList[0].list.some((function(e){return e.id===i.item.id}));n||t.popupList[0].list.push(i.item),t.popupList[0].selected=i.item.id,e.$off("chooseBrand")})),e.$on("chooseWarehouse",(function(i){t.fromList[0].value=i.item.store_house_name,t.fromList[0].id=i.item.id,e.$off("chooseWarehouse")})),e.$on("chooseCustomer",(function(i){t.fromList[1].value=i.item.name,t.fromList[1].id=i.item.id,e.$off("chooseCustomer")})),e.$on("chooseEmployees1",(function(i){t.fromList[2].value=i.item.name,t.fromList[2].id=i.item.id,e.$off("chooseEmployees1")})),e.$on("chooseEmployees2",(function(i){t.fromList[3].value=i.item.name,t.fromList[3].id=i.item.id,e.$off("chooseEmployees2")}))},computed:{allNumber:function(){var e=this,t=0;return this.selectedList.length>0&&this.list.forEach((function(i){-1!=e.selectedList.indexOf(i.id)&&(t+=i.num_now)})),t},totalPrice:function(){var e=this,t=0;return this.selectedList.length>0&&this.list.forEach((function(i){-1!=e.selectedList.indexOf(i.id)&&(t+=i.cost_price*i.num_now)})),t.toFixed(2)},isSelectedAll:{get:function(){return this.list.length===this.selectedList.length},set:function(){}}},onReachBottom:function(){var e=this;this.page>=this.last_page||(this.status="loading",this.page=++this.page,setTimeout((function(){e.getInfo()}),100))},data:function(){return{store_house_id:"",warehouseName:"",keyword:"",show:!1,popupList:[{name:"品牌",selected:"",isBrand:!0,list:[]},{name:"一级分类",selected:"",isBrand:!1,list:[]},{name:"二级分类",selected:"",isBrand:!1,list:[]},{name:"超期",selected:"",isBrand:!1,list:[]},{name:"来源",selected:"",isBrand:!1,list:[]},{name:"成色",selected:"",isBrand:!1,list:[]},{name:"库存",selected:"",isBrand:!1,list:[]}],fromList:[{type:"picker",name:"销售客户",value:"",id:"",url:"/pages/home/salesBilling/customerList/customerList",isImport:!1},{type:"picker",name:"入库人",value:"",id:"",url:"/pages/home/goodsInStorage/Employees/Employees?type=1",isImport:!1},{type:"picker",name:"回收人",value:"",id:"",url:"/pages/home/goodsInStorage/Employees/Employees?type=2",isImport:!1}],showDate:!1,start:"",end:"",min:"",max:"",last_page:1,page:1,list:[],status:"loading",iconType:"flower",loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"},selectedList:[],goodDataList:[]}},methods:{getScreenData:function(){var e=this;this.http.get("/api/v1/Index/getScreenData",{},!0).then((function(t){1e3==t.code&&(e.popupList[0].list=t.data.brand,e.popupList[1].list=t.data.top_cate,e.popupList[3].list=t.data.time_up,e.popupList[4].list=t.data.type_from,e.popupList[5].list=t.data.type_condition,e.popupList[6].list=t.data.type_sell)}))},getScreenCate:function(e){var t=this;this.http.get("/api/v1/Index/getScreenCate",{top_cate_id:e},!0).then((function(e){1e3==e.code&&(t.popupList[2].list=e.data.cate)}))},getInfo:function(){var e=this;this.http.get("/api/v1/StoreHouse/StoMoveGoodsLists",{store_house_id:this.store_house_id,keyword:this.keyword,date_order:0,sto_order:0,price_order:0,brand_id:this.popupList[0].selected,top_cate_id:this.popupList[1].selected||0,cate_id:this.popupList[2].selected,time_up:this.popupList[3].selected||2,type_from:this.popupList[4].selected||6,type_condition:this.popupList[5].selected||3,type_sell:this.popupList[6].selected||4,customer_id:this.fromList[0].id,sto_user_id:this.fromList[1].id,recovery_id:this.fromList[2].id,price_min:this.min||0,price_max:this.max||0,date_min:this.start||0,date_max:this.end||0,page:this.page}).then((function(t){if(1e3==t.code){if(0==e.list.length)e.last_page=t.data.page_data.last_page,e.list=t.data.page_data.good_data,e.list.map((function(t){return e.$set(t,"checked",!1)}));else{var i=t.data.page_data.good_data;i.map((function(t){return e.$set(t,"checked",!1)})),i.forEach((function(t){e.list.push(t)}))}e.page>=e.last_page?e.status="nomore":e.status="loadmore",e.show=!1}}))},judge:function(e,t){return e===t},choose:function(e,t,i){1==i&&e.selected!=t.id?this.getScreenCate(t.id):1==i&&e.selected==t.id&&(this.popupList[2].list=[],this.popupList[2].selected=""),e.selected===t.id?e.selected="":(this.$set(e,"selected",t.id),console.log(e.selected.toString()||6))},dateChange:function(e){console.log(e),this.start=e.startDate,this.end=e.endDate},clearGoodList:function(){this.show=!1,this.page=1,this.last_page=1,this.list=[],this.status="loading",this.getInfo()},reset:function(){this.show=!1,this.popupList.forEach((function(e){e.selected=""})),this.fromList.forEach((function(e){e.value="",e.id=""})),this.start="",this.end="",this.min="",this.max="",this.clearGoodList()},checkboxGroupChange:function(e){console.log(e)},checkboxChange:function(e){if(e.value)this.selectedList.push(e.name),this.goodDataList.push(this.list.map((function(t){if(t.id==e.name)return t}))[0]);else{var t="";this.goodDataList.forEach((function(i,n){i.id==e.name&&(t=n)})),this.goodDataList.splice(t,1),this.selectedList.forEach((function(i,n){i==e.name&&(t=n)})),this.selectedList.splice(t,1)}console.log(this.goodDataList),console.log(e)},doSelectedAll:function(){this.isSelectedAll?this.unCheckedAll():this.checkedAll()},checkedAll:function(){var e=this;this.selectedList=this.list.map((function(e){return e.checked=!0,e.id})),this.goodDataList=this.list.filter((function(t){return-1!=e.selectedList.indexOf(t.id)})),console.log(this.goodDataList)},unCheckedAll:function(){this.list.forEach((function(e){e.checked=!1})),this.selectedList=[],this.goodDataList=[]},submit:function(){var t=this;if(0==this.selectedList.length)return this.http.toast("请选择要移库的商品！");this.list.filter((function(e){return-1!=t.selectedList.indexOf(e.id)}));var i={list:this.goodDataList,selectedList:this.selectedList,warehouseName:this.warehouseName,store_house_id:this.store_house_id,totalPrice:this.totalPrice,allNumber:this.allNumber};e.navigateTo({url:"/pages/mine/WarehouseManagement/MoveTheLibrary/nextStep?data=".concat(encodeURIComponent(JSON.stringify(i)))})}}};t.default=u}).call(this,i("543d")["default"])},4210:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}));var n={uSearch:function(){return i.e("uview-ui/components/u-search/u-search").then(i.bind(null,"143d"))},uImage:function(){return i.e("uview-ui/components/u-image/u-image").then(i.bind(null,"0e5c"))},uPopup:function(){return i.e("uview-ui/components/u-popup/u-popup").then(i.bind(null,"089a"))},card:function(){return i.e("components/card/card").then(i.bind(null,"bc44"))},uRow:function(){return i.e("uview-ui/components/u-row/u-row").then(i.bind(null,"5fa6"))},uCol:function(){return i.e("uview-ui/components/u-col/u-col").then(i.bind(null,"5d8b"))},uIcon:function(){return i.e("uview-ui/components/u-icon/u-icon").then(i.bind(null,"0922"))},uLine:function(){return i.e("uview-ui/components/u-line/u-line").then(i.bind(null,"2cae"))},formList:function(){return i.e("components/form-list/form-list").then(i.bind(null,"9a28"))},uCheckboxGroup:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(i.bind(null,"882a"))},uGap:function(){return i.e("uview-ui/components/u-gap/u-gap").then(i.bind(null,"3be9"))},uCheckbox:function(){return i.e("uview-ui/components/u-checkbox/u-checkbox").then(i.bind(null,"0bdf"))},uTag:function(){return i.e("uview-ui/components/u-tag/u-tag").then(i.bind(null,"5cea"))},uEmpty:function(){return i.e("uview-ui/components/u-empty/u-empty").then(i.bind(null,"6c67"))},uLoadmore:function(){return i.e("uview-ui/components/u-loadmore/u-loadmore").then(i.bind(null,"d4ea"))},uMask:function(){return i.e("uview-ui/components/u-mask/u-mask").then(i.bind(null,"001e"))},uCalendar:function(){return i.e("uview-ui/components/u-calendar/u-calendar").then(i.bind(null,"6785"))}},o=function(){var e=this,t=e.$createElement,i=(e._self._c,e.__map(e.popupList,(function(t,i){var n=e.__get_orig(t),o=e.__map(t.list,(function(i,n){var o=e.__get_orig(i),s=e.judge(t.selected,i.id);return{$orig:o,m0:s}}));return{$orig:n,l0:o}}))),n=e.http.resourceUrl();e._isMounted||(e.e0=function(t){e.show=!0},e.e1=function(t){e.showDate=!0},e.e2=function(t){e.showDate=!0}),e.$mp.data=Object.assign({},{$root:{l1:i,g0:n}})},s=[]},"465d":function(e,t,i){"use strict";i.r(t);var n=i("4210"),o=i("bc4f");for(var s in o)"default"!==s&&function(e){i.d(t,e,(function(){return o[e]}))}(s);i("495c");var u,a=i("f0c5"),c=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"ce8ccdb0",null,!1,n["a"],u);t["default"]=c.exports},"495c":function(e,t,i){"use strict";var n=i("e345"),o=i.n(n);o.a},bc4f:function(e,t,i){"use strict";i.r(t);var n=i("1b9e"),o=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=o.a},c78e:function(e,t,i){"use strict";(function(e){i("2cfb");n(i("66fd"));var t=n(i("465d"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},e345:function(e,t,i){}},[["c78e","common/runtime","common/vendor"]]]);