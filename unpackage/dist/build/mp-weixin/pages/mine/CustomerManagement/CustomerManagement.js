(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/CustomerManagement/CustomerManagement"],{"2c2a":function(t,e,n){"use strict";var o=n("9711"),s=n.n(o);s.a},5579:function(t,e,n){"use strict";n.r(e);var o=n("7ff1"),s=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=s.a},"6b1f":function(t,e,n){"use strict";(function(t){n("2cfb");o(n("66fd"));var e=o(n("70bc"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"70bc":function(t,e,n){"use strict";n.r(e);var o=n("b93d"),s=n("5579");for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);n("2c2a");var u,a=n("f0c5"),r=Object(a["a"])(s["default"],o["b"],o["c"],!1,null,"8f3e6066",null,!1,o["a"],u);e["default"]=r.exports},"7ff1":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){n.e("components/inventory-list/inventory-list").then(function(){return resolve(n("f045"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/top-nav/top-nav").then(function(){return resolve(n("5f09"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/card/card").then(function(){return resolve(n("bc44"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/form-list/form-list").then(function(){return resolve(n("9a28"))}.bind(null,n)).catch(n.oe)},a={components:{inventoryList:o,topNav:s,card:i,formList:u},onLoad:function(){this.getInfo()},onShow:function(){var e=this;t.$on("chooseEmployees1",(function(n){e.fromList[0].value=n.item.name,e.fromList[0].id=n.item.id,t.$off("chooseEmployees1")})),t.$on("back",(function(n){e.clearGoodList(),t.$off("back")}))},onReachBottom:function(){var t=this;this.page>=this.last_page||(this.status="loading",this.page=++this.page,setTimeout((function(){t.getInfo()}),100))},onPullDownRefresh:function(){this.clearGoodList(),t.stopPullDownRefresh()},data:function(){return{keyword:"",navList:[{label:"客户数量",number:0,unit:"",isNav:!1,decimals:0},{label:"客户复卖率",number:0,unit:"%",isNav:!1,decimals:0},{label:"客户复购率",number:0,unit:"%",isNav:!1,decimals:0}],screen:{currentIndex:-1,list:[{name:"时间",status:0},{name:"订单数",status:0},{name:"回收",status:0},{name:"寄卖",status:0},{name:"在库",status:0}]},show:!1,popupList:[{name:"业务状态",selected:"",isBrand:!1,list:[{label:"无买卖",id:0},{label:"买卖过",id:1}]},{name:"客户复购度",selected:-1,isBrand:!1,list:[{label:"未买",id:0},{label:"买过",id:1},{label:"有复购",id:2}]},{name:"客户复卖度",selected:-1,isBrand:!1,list:[{label:"未卖",id:0},{label:"卖过",id:1},{label:"有复卖",id:2}]}],fromList:[{type:"picker",name:"维护员工",value:"",id:"",url:"/pages/home/goodsInStorage/Employees/Employees?type=1",isImport:!1}],showDate:!1,start:"",end:"",page:1,last_page:1,list:[],status:"loading",iconType:"flower",loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"}}},methods:{getInfo:function(){var t=this;this.http.get("/api/v1/Customer/listsPage",{keyword:this.keyword,baned_in:!0,date_order:this.screen.list[0].status,order_num_order:this.screen.list[1].status,rec_order:this.screen.list[2].status,cons_order:this.screen.list[3].status,sto_order:this.screen.list[4].status,is_no_deal:this.popupList[0].selected.toString()||0,repeat_buy:this.popupList[1].selected.toString()||0,repeat_sale:this.popupList[2].selected.toString()||0,date_min:this.start||0,date_max:this.end||0,page:this.page},!0).then((function(e){if(1e3==e.code){if(0==t.list.length)t.list=e.data.page_data.cus_data.map((function(e){return t._formatList(e)})),t.last_page=e.data.page_data.last_page||1,t.navList[0].number=e.data.top_data.cus_num,t.navList[1].number=e.data.top_data.rep_sale_rate,t.navList[2].number=e.data.top_data.rep_buy_rate;else{var n=e.data.page_data.cus_data.map((function(e){return t._formatList(e)}));t.list=t.list.concat(n)}t.page>=t.last_page?t.status="nomore":t.status="loadmore",t.show=!1}}))},_formatList:function(t){return{warehouseName:t.name,isSellAgain:t.repeat_sale,isBuyAgain:t.repeat_buy,no_deal:t.no_deal,id:t.id,message:[{title:"订单",value:t.order_num_arr.order_num,url:"/pages/home/salesReport/salesReport?customer_id=".concat(t.order_num_arr.customer_id)},{title:"回收",value:t.recovery_num_arr.recovery_num,url:"/pages/home/history/history?currentIndex=0&customer_id=".concat(t.recovery_num_arr.customer_id)},{title:"寄卖",value:t.consign_num_arr.consign_num,url:"/pages/home/history/history?currentIndex=1&customer_id=".concat(t.consign_num_arr.customer_id)},{title:"在库",value:t.stock_num_arr.stock_num,url:"/pages/home/queryManagement/queryManagement?customer_id=".concat(t.stock_num_arr.customer_id)}],time:t.created_at}},changeScreen:function(t){var e=this.screen.currentIndex;if(-1==e){var n=this.screen.list[t];return this.screen.currentIndex=t,n.status=-1,void this.clearGoodList()}var o=this.screen.list[e];if(e===t)return o.status=1===o.status?-1:1,this.clearGoodList();var s=this.screen.list[t];o.status=0,this.screen.currentIndex=t,s.status=-1,this.clearGoodList()},choose:function(t,e,n){t.selected==e.id?t.selected=-1:this.$set(t,"selected",e.id)},dateChange:function(t){console.log(t),this.start=t.startDate,this.end=t.endDate},reset:function(){this.show=!1,this.popupList.forEach((function(t){t.selected=""})),this.fromList.forEach((function(t){t.value="",t.id=""})),this.start="",this.end="",this.getInfo()},input:function(t){console.log(t),this.$set(this.fromList[t.index],"value",t.value)},clearGoodList:function(){this.show=!1,this.list=[],this.page=1,this.last_page=1,this.status="loading",this.getInfo()},setting:function(e){t.navigateTo({url:"/pages/home/salesBilling/customerList/addCustomer?customer_id="+e})},delet:function(t){var e=this;this.http.modal("提示","确认要删除该客户吗?",!0,(function(n){n&&e.http.get("/api/v1/Customer/deleteCustomer",{customer_id:t},!0).then((function(t){1e3==t.code?(e.$refs.uToast.show({title:t.msg,type:"success"}),e.clearGoodList()):e.$refs.uToast.show({title:t.msg,type:"error"})}))}),"#FE8702")}}};e.default=a}).call(this,n("543d")["default"])},9711:function(t,e,n){},b93d:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uSearch:function(){return n.e("uview-ui/components/u-search/u-search").then(n.bind(null,"143d"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"0e5c"))},topNav:function(){return n.e("components/top-nav/top-nav").then(n.bind(null,"5f09"))},uSticky:function(){return n.e("uview-ui/components/u-sticky/u-sticky").then(n.bind(null,"8072"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"0922"))},uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"089a"))},card:function(){return n.e("components/card/card").then(n.bind(null,"bc44"))},uRow:function(){return n.e("uview-ui/components/u-row/u-row").then(n.bind(null,"5fa6"))},uCol:function(){return n.e("uview-ui/components/u-col/u-col").then(n.bind(null,"5d8b"))},uLine:function(){return n.e("uview-ui/components/u-line/u-line").then(n.bind(null,"2cae"))},formList:function(){return n.e("components/form-list/form-list").then(n.bind(null,"9a28"))},inventoryList:function(){return n.e("components/inventory-list/inventory-list").then(n.bind(null,"f045"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"4d2a"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"d4ea"))},uToast:function(){return n.e("uview-ui/components/u-toast/u-toast").then(n.bind(null,"1922"))},uMask:function(){return n.e("uview-ui/components/u-mask/u-mask").then(n.bind(null,"001e"))},uCalendar:function(){return n.e("uview-ui/components/u-calendar/u-calendar").then(n.bind(null,"6785"))}},s=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.show=!0},t.e1=function(e){t.showDate=!0},t.e2=function(e){t.showDate=!0})},i=[]}},[["6b1f","common/runtime","common/vendor"]]]);